import{M as e,x as a,B as r,o as s,c as t,w as o,i as n,e as d,l as i,A as p,N as c,O as u,L as m,j as l,k as f}from"./index.338b6ccd.js";import{a as g}from"./u-button.6883e742.js";import{P as y,c as I}from"./base.0d2f687c.js";import{_ as x}from"./index.bc11c543.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";import"regenerator-runtime";import"./u-icon.1aa3d7c1.js";import"./uni-datetime-picker.5cec1977.js";import"./uni-icons.a9b6e36d.js";import"./u--textarea.97b5a670.js";const b={formItems:[{renderType:y.INPUT,placeholder:"请输入账号",dataIndex:"account",type:"text"},{renderType:y.PASSWORDINP,placeholder:"请输入密码",dataIndex:"password",type:"password",isShowPassword:!1},{renderType:y.RADIO,dataIndex:"type",options:[{value:"分包领导",name:"1"},{value:"企业用户",name:"2"}]}],rules:{account:{required:!0,message:"请填写正确的账号",trigger:["blur","change"]},type:{required:!0,message:"请选择身份",trigger:["change"]},password:{required:!0,message:"密码不能为空",trigger:["blur","change"]}}};var h=_({__name:"index",setup(y){const _=e.user(),h=a(),j=r({account:"",type:"",openId:_.userInfo.openId,password:""}),k=()=>{h.value.form.validate().then((async e=>{j.type=Number(j.type);let{msg:a,data:r}=await c(j);a===I.success&&(_.$patch({userType:r.userType,token:r.token,userId:r.userId,name:r.name,enterpriseId:r.enterpriseId||""}),u("token",r.token),m({title:"登录成功"}),uni.redirectTo({url:"/pages/home/index"}))}))};return(e,a)=>{const r=n,c=l(f("u-button"),g);return s(),t(r,{class:"container"},{default:o((()=>[d(r,{class:"title"},{default:o((()=>[i(" 用户登录 ")])),_:1}),d(r,{class:"from"},{default:o((()=>[d(p(x),{ref_key:"form",ref:h,"form-data":j,"form-config":p(b)},null,8,["form-data","form-config"]),d(c,{class:"margin-top-20",type:"primary",text:"登录",onClick:k})])),_:1})])),_:1})}}},[["__scopeId","data-v-3df7e77e"]]);export{h as default};
